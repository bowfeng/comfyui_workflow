{"id":"103530bb-e581-4ed8-9ef4-d32110ce3416","revision":0,"last_node_id":23,"last_link_id":21,"nodes":[{"id":17,"type":"PreviewImage","pos":[1139,-210],"size":[314.10235595703125,510.94549560546875],"flags":{},"order":10,"mode":0,"inputs":[{"label":"images","localized_name":"images","name":"images","type":"IMAGE","link":12}],"outputs":[],"properties":{"cnr_id":"comfy-core","ver":"0.3.42","Node name for S&R":"PreviewImage"},"widgets_values":[]},{"id":8,"type":"VAEDecode","pos":[890,-211],"size":[169.0520782470703,46],"flags":{},"order":9,"mode":0,"inputs":[{"label":"samples","localized_name":"samples","name":"samples","type":"LATENT","link":7},{"label":"vae","localized_name":"vae","name":"vae","type":"VAE","link":16}],"outputs":[{"label":"IMAGE","localized_name":"IMAGE","name":"IMAGE","type":"IMAGE","slot_index":0,"links":[12]}],"properties":{"cnr_id":"comfy-core","ver":"0.3.42","Node name for S&R":"VAEDecode"},"widgets_values":[]},{"id":20,"type":"Note","pos":[-588,123],"size":[426.30084228515625,476.4090881347656],"flags":{},"order":0,"mode":0,"inputs":[],"outputs":[],"properties":{},"widgets_values":["Full tutorial address: https://comfyui-wiki.com/tutorial/advanced/flux1-comfyui-guide-workflow-and-examples\n1. Download [Flux GGUF dev model](https://huggingface.co/city96/FLUX.1-dev-gguf) or [Flux GGUF schnell model](https://huggingface.co/city96/FLUX.1-schnell-gguf) and place the model file in the `comfyui/models/unet` directory.\n\n2. Download [t5-v1_1-xxl-encoder-gguf](https://huggingface.co/city96/t5-v1_1-xxl-encoder-gguf) and place the model file in the `comfyui/models/clip` directory.\n\n3. Download [clip_l.safetensors](https://huggingface.co/comfyanonymous/flux_text_encoders/blob/main/clip_l.safetensors) and place the model file in the `comfyui/models/clip` directory.\n\n4. Download [ae.safetensors](https://huggingface.co/black-forest-labs/FLUX.1-schnell/blob/main/ae.safetensors) and place the model file in the `comfyui/models/vae`  directory.\n\n5. Install [ComfyUI-GGUF](https://github.com/city96/ComfyUI-GGUF) plugin.\n\n6. If you are using the dev model, set the step of Ksampler to 20. If it is schnell, set the step to 4.\n\n完整教程地址：https://comfyui-wiki.com/zh/tutorial/advanced/flux1-comfyui-guide-workflow-and-examples\n\n1. 下载 [Flux GGUF dev 模型](https://huggingface.co/city96/FLUX.1-dev-gguf) 或 [Flux GGUF schnell 模型](https://huggingface.co/city96/FLUX.1-schnell-gguf) 并将模型文件放置在 `comfyui/models/unet` 目录下 \n\n2. 下载 [t5-v1_1-xxl-encoder-gguf](https://huggingface.co/city96/t5-v1_1-xxl-encoder-gguf),并将模型文件放置在 `comfyui/models/clip` 目录下\n\n3. 下载 [clip_l.safetensors](https://huggingface.co/comfyanonymous/flux_text_encoders/blob/main/clip_l.safetensors) 并将模型文件放置在 `comfyui/models/clip` 目录下\n\n4. 下载 [ae.safetensors](https://huggingface.co/black-forest-labs/FLUX.1-schnell/blob/main/ae.safetensors) 并将模型文件放置在 `comfyui/models/vae` 目录下,建议重命名为 `flux_ae.safetensors`\n\n5. 安装 [ComfyUI-GGUF](https://github.com/city96/ComfyUI-GGUF) 插件\n\n6. 如果你使用的是 dev 模型，请将 Ksampler 的 step 设置为 20 , 如果是 schnell 则将 step 设置为 4"],"color":"#432","bgcolor":"#653"},{"id":23,"type":"VAEEncode","pos":[267,279],"size":[210,46],"flags":{},"order":6,"mode":0,"inputs":[{"localized_name":"pixels","name":"pixels","type":"IMAGE","link":19},{"localized_name":"vae","name":"vae","type":"VAE","link":20}],"outputs":[{"localized_name":"LATENT","name":"LATENT","type":"LATENT","slot_index":0,"links":[21]}],"properties":{"cnr_id":"comfy-core","ver":"0.3.42","Node name for S&R":"VAEEncode"},"widgets_values":[]},{"id":16,"type":"ConditioningZeroOut","pos":[250.07176208496094,79.36767578125],"size":[211.60000610351562,26],"flags":{"collapsed":true},"order":7,"mode":0,"inputs":[{"label":"conditioning","localized_name":"conditioning","name":"conditioning","type":"CONDITIONING","link":13}],"outputs":[{"label":"CONDITIONING","localized_name":"CONDITIONING","name":"CONDITIONING","type":"CONDITIONING","slot_index":0,"links":[14]}],"properties":{"cnr_id":"comfy-core","ver":"0.3.42","Node name for S&R":"ConditioningZeroOut"},"widgets_values":[]},{"id":11,"type":"VAELoader","pos":[-27.847637176513672,-309.2416687011719],"size":[220.6435546875,58.50890350341797],"flags":{},"order":1,"mode":0,"inputs":[{"localized_name":"vae_name","name":"vae_name","type":"COMBO","widget":{"name":"vae_name"},"link":null}],"outputs":[{"label":"VAE","localized_name":"VAE","name":"VAE","type":"VAE","slot_index":0,"links":[16,20]}],"properties":{"cnr_id":"comfy-core","ver":"0.3.42","Node name for S&R":"VAELoader"},"widgets_values":["ae.safetensors"]},{"id":10,"type":"UnetLoaderGGUF","pos":[-49.935218811035156,-210.64266967773438],"size":[266.6243591308594,71.75386810302734],"flags":{},"order":2,"mode":0,"inputs":[{"localized_name":"unet_name","name":"unet_name","type":"COMBO","widget":{"name":"unet_name"},"link":null}],"outputs":[{"label":"MODEL","localized_name":"MODEL","name":"MODEL","type":"MODEL","slot_index":0,"links":[10]}],"properties":{"cnr_id":"comfyui-gguf","ver":"1.1.1","Node name for S&R":"UnetLoaderGGUF"},"widgets_values":["flux1-dev-Q8_0.gguf"]},{"id":19,"type":"DualCLIPLoaderGGUF","pos":[-88.10505676269531,-84.38347625732422],"size":[315,106],"flags":{},"order":3,"mode":0,"inputs":[{"localized_name":"clip_name1","name":"clip_name1","type":"COMBO","widget":{"name":"clip_name1"},"link":null},{"localized_name":"clip_name2","name":"clip_name2","type":"COMBO","widget":{"name":"clip_name2"},"link":null},{"localized_name":"type","name":"type","type":"COMBO","widget":{"name":"type"},"link":null}],"outputs":[{"localized_name":"CLIP","name":"CLIP","type":"CLIP","slot_index":0,"links":[17]}],"properties":{"cnr_id":"comfyui-gguf","ver":"1.1.1","Node name for S&R":"DualCLIPLoaderGGUF"},"widgets_values":["clip_l.safetensors","t5-v1_1-xxl-encoder-Q8_0.gguf","flux"]},{"id":21,"type":"LoadImage","pos":[-85.76882934570312,106.42525482177734],"size":[315,314],"flags":{},"order":4,"mode":0,"inputs":[{"localized_name":"image","name":"image","type":"COMBO","widget":{"name":"image"},"link":null},{"localized_name":"choose file to upload","name":"upload","type":"IMAGEUPLOAD","widget":{"name":"upload"},"link":null}],"outputs":[{"localized_name":"IMAGE","name":"IMAGE","type":"IMAGE","slot_index":0,"links":[19]},{"localized_name":"MASK","name":"MASK","type":"MASK","links":null}],"properties":{"cnr_id":"comfy-core","ver":"0.3.42","Node name for S&R":"LoadImage"},"widgets_values":["屏幕截图 2025-05-28 003544.png","image"]},{"id":3,"type":"KSampler","pos":[562,-213],"size":[271.3189697265625,476.9822692871094],"flags":{},"order":8,"mode":0,"inputs":[{"label":"model","localized_name":"model","name":"model","type":"MODEL","link":10},{"label":"positive","localized_name":"positive","name":"positive","type":"CONDITIONING","link":15},{"label":"negative","localized_name":"negative","name":"negative","type":"CONDITIONING","link":14},{"label":"latent_image","localized_name":"latent_image","name":"latent_image","type":"LATENT","link":21},{"localized_name":"seed","name":"seed","type":"INT","widget":{"name":"seed"},"link":null},{"localized_name":"steps","name":"steps","type":"INT","widget":{"name":"steps"},"link":null},{"localized_name":"cfg","name":"cfg","type":"FLOAT","widget":{"name":"cfg"},"link":null},{"localized_name":"sampler_name","name":"sampler_name","type":"COMBO","widget":{"name":"sampler_name"},"link":null},{"localized_name":"scheduler","name":"scheduler","type":"COMBO","widget":{"name":"scheduler"},"link":null},{"localized_name":"denoise","name":"denoise","type":"FLOAT","widget":{"name":"denoise"},"link":null}],"outputs":[{"label":"LATENT","localized_name":"LATENT","name":"LATENT","type":"LATENT","slot_index":0,"links":[7]}],"properties":{"cnr_id":"comfy-core","ver":"0.3.42","Node name for S&R":"KSampler"},"widgets_values":[277863104224528,"randomize",10,1,"euler","simple",0.9]},{"id":15,"type":"CLIPTextEncodeFlux","pos":[252.80374145507812,-271.09588623046875],"size":[245.41822814941406,272.1675109863281],"flags":{},"order":5,"mode":0,"inputs":[{"label":"clip","localized_name":"clip","name":"clip","type":"CLIP","link":17},{"localized_name":"clip_l","name":"clip_l","type":"STRING","widget":{"name":"clip_l"},"link":null},{"localized_name":"t5xxl","name":"t5xxl","type":"STRING","widget":{"name":"t5xxl"},"link":null},{"localized_name":"guidance","name":"guidance","type":"FLOAT","widget":{"name":"guidance"},"link":null}],"outputs":[{"label":"CONDITIONING","localized_name":"CONDITIONING","name":"CONDITIONING","type":"CONDITIONING","slot_index":0,"links":[13,15]}],"properties":{"cnr_id":"comfy-core","ver":"0.3.42","Node name for S&R":"CLIPTextEncodeFlux"},"widgets_values":["an asian 3 month cute chubby infant wearing a red and gold crown on his head. He is standing in front of a wall, with a plant to his right and a window to his left. At the top left corner of the image, there is some text.","an asian 3 month cute chubby infant wearing a red and gold crown on his head. He is standing in front of a wall, with a plant to his right and a window to his left. At the top left corner of the image, there is some text.",3.5,[false,true],[false,true]]}],"links":[[7,3,0,8,0,"LATENT"],[10,10,0,3,0,"MODEL"],[12,8,0,17,0,"IMAGE"],[13,15,0,16,0,"CONDITIONING"],[14,16,0,3,2,"CONDITIONING"],[15,15,0,3,1,"CONDITIONING"],[16,11,0,8,1,"VAE"],[17,19,0,15,0,"CLIP"],[19,21,0,23,0,"IMAGE"],[20,11,0,23,1,"VAE"],[21,23,0,3,3,"LATENT"]],"groups":[{"id":1,"title":"load model","bounding":[-105,-398,335,437],"color":"#3f789e","font_size":22,"flags":{}}],"config":{},"extra":{"ds":{"scale":1,"offset":[859.318930590362,399.7759620982454]}},"version":0.4}