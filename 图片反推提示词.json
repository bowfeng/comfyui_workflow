{"id":"79003b1e-bc63-4e2d-b970-79f61a86c426","revision":0,"last_node_id":22,"last_link_id":17,"nodes":[{"id":13,"type":"PreviewImage","pos":[879.3560791015625,498.6371765136719],"size":[140,246.00003051757812],"flags":{},"order":7,"mode":0,"inputs":[{"localized_name":"images","name":"images","type":"IMAGE","link":12}],"outputs":[],"properties":{"cnr_id":"comfy-core","ver":"0.3.64","Node name for S&R":"PreviewImage"},"widgets_values":[]},{"id":4,"type":"DownloadAndLoadFlorence2Model","pos":[573.2222900390625,150.79296875],"size":[318.6021423339844,130],"flags":{},"order":0,"mode":0,"inputs":[{"localized_name":"lora","name":"lora","shape":7,"type":"PEFTLORA","link":null},{"localized_name":"model","name":"model","type":"COMBO","widget":{"name":"model"},"link":null},{"localized_name":"precision","name":"precision","type":"COMBO","widget":{"name":"precision"},"link":null},{"localized_name":"attention","name":"attention","type":"COMBO","widget":{"name":"attention"},"link":null},{"localized_name":"convert_to_safetensors","name":"convert_to_safetensors","shape":7,"type":"BOOLEAN","widget":{"name":"convert_to_safetensors"},"link":null}],"outputs":[{"localized_name":"florence2_model","name":"florence2_model","type":"FL2MODEL","links":[2]}],"properties":{"cnr_id":"comfyui-florence2","ver":"1.0.5","Node name for S&R":"DownloadAndLoadFlorence2Model"},"widgets_values":["gokaygokay/Florence-2-Flux-Large","fp16","sdpa",false]},{"id":6,"type":"Florence2Run","pos":[1146.2120361328125,346.95538330078125],"size":[400,364],"flags":{},"order":6,"mode":0,"inputs":[{"localized_name":"image","name":"image","type":"IMAGE","link":11},{"localized_name":"florence2_model","name":"florence2_model","type":"FL2MODEL","link":2},{"localized_name":"text_input","name":"text_input","type":"STRING","widget":{"name":"text_input"},"link":null},{"localized_name":"task","name":"task","type":"COMBO","widget":{"name":"task"},"link":null},{"localized_name":"fill_mask","name":"fill_mask","type":"BOOLEAN","widget":{"name":"fill_mask"},"link":null},{"localized_name":"keep_model_loaded","name":"keep_model_loaded","shape":7,"type":"BOOLEAN","widget":{"name":"keep_model_loaded"},"link":null},{"localized_name":"max_new_tokens","name":"max_new_tokens","shape":7,"type":"INT","widget":{"name":"max_new_tokens"},"link":null},{"localized_name":"num_beams","name":"num_beams","shape":7,"type":"INT","widget":{"name":"num_beams"},"link":null},{"localized_name":"do_sample","name":"do_sample","shape":7,"type":"BOOLEAN","widget":{"name":"do_sample"},"link":null},{"localized_name":"output_mask_select","name":"output_mask_select","shape":7,"type":"STRING","widget":{"name":"output_mask_select"},"link":null},{"localized_name":"seed","name":"seed","shape":7,"type":"INT","widget":{"name":"seed"},"link":null}],"outputs":[{"localized_name":"image","name":"image","type":"IMAGE","links":[]},{"localized_name":"mask","name":"mask","type":"MASK","links":null},{"localized_name":"caption","name":"caption","type":"STRING","links":[4]},{"localized_name":"data","name":"data","type":"JSON","links":null}],"properties":{"cnr_id":"comfyui-florence2","ver":"1.0.5","Node name for S&R":"Florence2Run"},"widgets_values":["","detailed_caption",true,false,1024,3,true,"",259497964033026,"randomize"]},{"id":8,"type":"PreviewAny","pos":[1568.585205078125,363.7264709472656],"size":[747.4962768554688,258.4562072753906],"flags":{},"order":9,"mode":0,"inputs":[{"localized_name":"source","name":"source","type":"*","link":4}],"outputs":[],"properties":{"cnr_id":"comfy-core","ver":"0.3.42","Node name for S&R":"PreviewAny"},"widgets_values":[]},{"id":15,"type":"SAMModelLoader (segment anything)","pos":[426.2720031738281,787.0463256835938],"size":[335.6919860839844,58],"flags":{},"order":1,"mode":0,"inputs":[{"localized_name":"model_name","name":"model_name","type":"COMBO","widget":{"name":"model_name"},"link":null}],"outputs":[{"localized_name":"SAM_MODEL","name":"SAM_MODEL","type":"SAM_MODEL","links":[13]}],"properties":{"cnr_id":"comfyui_segment_anything","ver":"ab6395596399d5048639cdab7e44ec9fae857a93","Node name for S&R":"SAMModelLoader (segment anything)"},"widgets_values":["sam_vit_h (2.56GB)"]},{"id":3,"type":"LoadImage","pos":[502.52276611328125,354.14276123046875],"size":[270,314],"flags":{},"order":2,"mode":0,"inputs":[{"localized_name":"image","name":"image","type":"COMBO","widget":{"name":"image"},"link":null},{"localized_name":"choose file to upload","name":"upload","type":"IMAGEUPLOAD","widget":{"name":"upload"},"link":null}],"outputs":[{"localized_name":"IMAGE","name":"IMAGE","type":"IMAGE","links":[8]},{"localized_name":"MASK","name":"MASK","type":"MASK","links":null}],"properties":{"cnr_id":"comfy-core","ver":"0.3.42","Node name for S&R":"LoadImage"},"widgets_values":["girl.jpg","image"]},{"id":17,"type":"MaskPreview+","pos":[1394.5511474609375,849.0755615234375],"size":[150.14315795898438,26],"flags":{},"order":11,"mode":0,"inputs":[{"localized_name":"mask","name":"mask","type":"MASK","link":15}],"outputs":[],"properties":{"cnr_id":"comfyui_essentials","ver":"1.1.0","Node name for S&R":"MaskPreview+"},"widgets_values":[]},{"id":16,"type":"SAMDetectorCombined","pos":[1060.608154296875,804.99169921875],"size":[296.755859375,218],"flags":{},"order":10,"mode":0,"inputs":[{"localized_name":"sam_model","name":"sam_model","type":"SAM_MODEL","link":13},{"localized_name":"segs","name":"segs","type":"SEGS","link":17},{"localized_name":"image","name":"image","type":"IMAGE","link":14},{"localized_name":"detection_hint","name":"detection_hint","type":"COMBO","widget":{"name":"detection_hint"},"link":null},{"localized_name":"dilation","name":"dilation","type":"INT","widget":{"name":"dilation"},"link":null},{"localized_name":"threshold","name":"threshold","type":"FLOAT","widget":{"name":"threshold"},"link":null},{"localized_name":"bbox_expansion","name":"bbox_expansion","type":"INT","widget":{"name":"bbox_expansion"},"link":null},{"localized_name":"mask_hint_threshold","name":"mask_hint_threshold","type":"FLOAT","widget":{"name":"mask_hint_threshold"},"link":null},{"localized_name":"mask_hint_use_negative","name":"mask_hint_use_negative","type":"COMBO","widget":{"name":"mask_hint_use_negative"},"link":null}],"outputs":[{"localized_name":"MASK","name":"MASK","type":"MASK","links":[15]}],"properties":{"cnr_id":"comfyui-impact-pack","ver":"8.25.1","Node name for S&R":"SAMDetectorCombined"},"widgets_values":["center-1",0,0.93,0,0.7,"False"]},{"id":11,"type":"ImageScaleToTotalPixels","pos":[853.205322265625,345.7796630859375],"size":[270,82],"flags":{},"order":5,"mode":0,"inputs":[{"localized_name":"image","name":"image","type":"IMAGE","link":8},{"localized_name":"upscale_method","name":"upscale_method","type":"COMBO","widget":{"name":"upscale_method"},"link":null},{"localized_name":"megapixels","name":"megapixels","type":"FLOAT","widget":{"name":"megapixels"},"link":null}],"outputs":[{"localized_name":"IMAGE","name":"IMAGE","type":"IMAGE","links":[11,12,14,16]}],"properties":{"cnr_id":"comfy-core","ver":"0.3.64","Node name for S&R":"ImageScaleToTotalPixels"},"widgets_values":["nearest-exact",0.5]},{"id":20,"type":"ImpactSimpleDetectorSEGS","pos":[705.2085571289062,903.30224609375],"size":[304.07421875,310],"flags":{},"order":8,"mode":0,"inputs":[{"localized_name":"bbox_detector","name":"bbox_detector","type":"BBOX_DETECTOR","link":null},{"localized_name":"image","name":"image","type":"IMAGE","link":16},{"localized_name":"sam_model_opt","name":"sam_model_opt","shape":7,"type":"SAM_MODEL","link":null},{"localized_name":"segm_detector_opt","name":"segm_detector_opt","shape":7,"type":"SEGM_DETECTOR","link":null},{"localized_name":"bbox_threshold","name":"bbox_threshold","type":"FLOAT","widget":{"name":"bbox_threshold"},"link":null},{"localized_name":"bbox_dilation","name":"bbox_dilation","type":"INT","widget":{"name":"bbox_dilation"},"link":null},{"localized_name":"crop_factor","name":"crop_factor","type":"FLOAT","widget":{"name":"crop_factor"},"link":null},{"localized_name":"drop_size","name":"drop_size","type":"INT","widget":{"name":"drop_size"},"link":null},{"localized_name":"sub_threshold","name":"sub_threshold","type":"FLOAT","widget":{"name":"sub_threshold"},"link":null},{"localized_name":"sub_dilation","name":"sub_dilation","type":"INT","widget":{"name":"sub_dilation"},"link":null},{"localized_name":"sub_bbox_expansion","name":"sub_bbox_expansion","type":"INT","widget":{"name":"sub_bbox_expansion"},"link":null},{"localized_name":"sam_mask_hint_threshold","name":"sam_mask_hint_threshold","type":"FLOAT","widget":{"name":"sam_mask_hint_threshold"},"link":null},{"localized_name":"post_dilation","name":"post_dilation","shape":7,"type":"INT","widget":{"name":"post_dilation"},"link":null}],"outputs":[{"localized_name":"SEGS","name":"SEGS","type":"SEGS","links":[17]}],"properties":{"cnr_id":"comfyui-impact-pack","ver":"8.25.1","Node name for S&R":"ImpactSimpleDetectorSEGS"},"widgets_values":[0.5,0,3,10,0.5,0,0,0.7,0]},{"id":21,"type":"BboxDetectorSEGS","pos":[262.0318298339844,977.4251708984375],"size":[400,224],"flags":{},"order":3,"mode":0,"inputs":[{"localized_name":"bbox_detector","name":"bbox_detector","type":"BBOX_DETECTOR","link":null},{"localized_name":"image","name":"image","type":"IMAGE","link":null},{"localized_name":"detailer_hook","name":"detailer_hook","shape":7,"type":"DETAILER_HOOK","link":null},{"localized_name":"threshold","name":"threshold","type":"FLOAT","widget":{"name":"threshold"},"link":null},{"localized_name":"dilation","name":"dilation","type":"INT","widget":{"name":"dilation"},"link":null},{"localized_name":"crop_factor","name":"crop_factor","type":"FLOAT","widget":{"name":"crop_factor"},"link":null},{"localized_name":"drop_size","name":"drop_size","type":"INT","widget":{"name":"drop_size"},"link":null},{"localized_name":"labels","name":"labels","type":"STRING","widget":{"name":"labels"},"link":null}],"outputs":[{"localized_name":"SEGS","name":"SEGS","type":"SEGS","links":null}],"properties":{"cnr_id":"comfyui-impact-pack","ver":"8.25.1","Node name for S&R":"BboxDetectorSEGS"},"widgets_values":[0.5,10,3,10,"all"]},{"id":22,"type":"ReActorMaskHelper","pos":[1488.5135498046875,1027.6439208984375],"size":[296.755859375,454],"flags":{},"order":4,"mode":0,"inputs":[{"localized_name":"image","name":"image","type":"IMAGE","link":null},{"localized_name":"swapped_image","name":"swapped_image","type":"IMAGE","link":null},{"localized_name":"mask_optional","name":"mask_optional","shape":7,"type":"MASK","link":null},{"localized_name":"bbox_model_name","name":"bbox_model_name","type":"COMBO","widget":{"name":"bbox_model_name"},"link":null},{"localized_name":"bbox_threshold","name":"bbox_threshold","type":"FLOAT","widget":{"name":"bbox_threshold"},"link":null},{"localized_name":"bbox_dilation","name":"bbox_dilation","type":"INT","widget":{"name":"bbox_dilation"},"link":null},{"localized_name":"bbox_crop_factor","name":"bbox_crop_factor","type":"FLOAT","widget":{"name":"bbox_crop_factor"},"link":null},{"localized_name":"bbox_drop_size","name":"bbox_drop_size","type":"INT","widget":{"name":"bbox_drop_size"},"link":null},{"localized_name":"sam_model_name","name":"sam_model_name","type":"COMBO","widget":{"name":"sam_model_name"},"link":null},{"localized_name":"sam_dilation","name":"sam_dilation","type":"INT","widget":{"name":"sam_dilation"},"link":null},{"localized_name":"sam_threshold","name":"sam_threshold","type":"FLOAT","widget":{"name":"sam_threshold"},"link":null},{"localized_name":"bbox_expansion","name":"bbox_expansion","type":"INT","widget":{"name":"bbox_expansion"},"link":null},{"localized_name":"mask_hint_threshold","name":"mask_hint_threshold","type":"FLOAT","widget":{"name":"mask_hint_threshold"},"link":null},{"localized_name":"mask_hint_use_negative","name":"mask_hint_use_negative","type":"COMBO","widget":{"name":"mask_hint_use_negative"},"link":null},{"localized_name":"morphology_operation","name":"morphology_operation","type":"COMBO","widget":{"name":"morphology_operation"},"link":null},{"localized_name":"morphology_distance","name":"morphology_distance","type":"INT","widget":{"name":"morphology_distance"},"link":null},{"localized_name":"blur_radius","name":"blur_radius","type":"INT","widget":{"name":"blur_radius"},"link":null},{"localized_name":"sigma_factor","name":"sigma_factor","type":"FLOAT","widget":{"name":"sigma_factor"},"link":null}],"outputs":[{"localized_name":"IMAGE","name":"IMAGE","type":"IMAGE","links":null},{"localized_name":"MASK","name":"MASK","type":"MASK","links":null},{"localized_name":"MASK_PREVIEW","name":"MASK_PREVIEW","type":"IMAGE","links":null},{"localized_name":"SWAPPED_FACE","name":"SWAPPED_FACE","type":"IMAGE","links":null}],"properties":{"Node name for S&R":"ReActorMaskHelper"},"widgets_values":[null,0.5,10,3,10,"sam_vit_b_01ec64.pth",0,0.93,0,0.7,"False","dilate",0,9,1]}],"links":[[2,4,0,6,1,"FL2MODEL"],[4,6,2,8,0,"*"],[8,3,0,11,0,"IMAGE"],[11,11,0,6,0,"IMAGE"],[12,11,0,13,0,"IMAGE"],[13,15,0,16,0,"SAM_MODEL"],[14,11,0,16,2,"IMAGE"],[15,16,0,17,0,"MASK"],[16,11,0,20,1,"IMAGE"],[17,20,0,16,1,"SEGS"]],"groups":[],"config":{},"extra":{"ds":{"scale":1.1671841070450026,"offset":[-87.99173282244764,-486.4553607435168]}},"version":0.4}